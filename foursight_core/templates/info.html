{% extends "header.html" %}

<!-- Macro for toggle button to display _output fields of checks -->
{% macro name_value_box(dictionary) %}
    <div class="info boxstyle">
        <h5 style='margin:10px 5px 10px 5px;'}}>
            {% for key, value in dictionary.items() %}
            <div class='row'>
                <div class="col-sm-4">
                    <div style="padding:0;" align="left">
                        <b>{{key}}</b>
                    </div>
                </div>
                <div class="col-sm-8" style="word-wrap: break-word;" align="left">
                    {% if value.__class__.__name__ == 'list' %}
                        {% for v in value %}
                            {% if v.__class__.__name__ == 'dict' %}
                                <b><code style="margin-left:-3pt;background:#D6EAF8;color:#263A48;">{{v}}</code></b>
                            {% else %}
                                {{v}} <br />
                            {% endif %}
                        {% endfor %}
                    {% elif value.__class__.__name__ == 'dict' %}
                        <b><code style="margin-left:-3pt;background:#D6EAF8;color:#263A48;">{{value}}</code></b>
                    {% else %}
                        {% if key == "Python Version:" %}
                            <a target="_blank" href="https://docs.python.org/release/{{value}}/">{{value}}</a>
                        {% elif key == "DCIC-Utils Version:" %}
                            <a target="_blank" href="https://pypi.org/project/dcicutils/{{value}}/">{{value}}</a> <b>|</b>
                            <a target="_blank" href="https://pypi.org/project/dcicutils/{{value}}/">PyPi</a> <b>|</b>
                            <a target="_blank" href="https://github.com/4dn-dcic/utils/releases/tag/v{{value}}">GitHub</a>
                        {% elif key == "Foursight-Core Version:" %}
                            <a target="_blank" href="https://pypi.org/project/foursight-core/{{value}}/">{{value}}</a> <b>|</b>
                            <a target="_blank" href="https://pypi.org/project/foursight-core/{{value}}/">PyPi</a> <b>|</b>
                            <a target="_blank" href="https://github.com/4dn-dcic/foursight-core/releases/tag/v{{value}}">GitHub</a>
                        {% elif key == "Foursight-CGAP Version:" %}
                            <a target="_blank" href="https://pypi.org/project/foursight-cgap/{{value}}/">{{value}}</a> <b>|</b>
                            <a target="_blank" href="https://pypi.org/project/foursight-cgap/{{value}}/">PyPi</a> <b>|</b>
                            <a target="_blank" href="https://github.com/dbmi-bgm/foursight-cgap/releases/tag/v{{value}}">GitHub</a>
                        {% else %}
                            {{value}}
                        {% endif %}
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </h5>
    </div>
{% endmacro %}

{% macro list_box(list) %}
    <div class="check-pass boxstyle">
        <h5 style='margin:10px 5px 10px 5px;'}}>
            {% for value in list %}
            <div class='row'>
                <div class="col-sm-4">
                    <div style="padding:0;" align="left">
                        <b>{{value}}</b>
                    </div>
                </div>
            </div>
            {% endfor %}
        </h5>
    </div>
{% endmacro %}

{% block content %}
    <ul class="top-level-list">
        <b>Versions</b>
       {{name_value_box(versions)}}
    </ul>
    <ul class="top-level-list">
        <b>Environment Names</b>
        {{name_value_box(environment_names)}}
    </ul>
    <ul class="top-level-list">
        <b>Bucket Names</b>
        {{name_value_box(bucket_names)}}
    </ul>
    <ul class="top-level-list">
        <b>Environment &amp; Bucket Names</b>
        {{name_value_box(environment_and_bucket_info)}}
    </ul>
    <ul class="top-level-list">
        <b>Declared Data</b>
       {{name_value_box(declared_data)}}
    </ul>
    <ul class="top-level-list">
        <b>AWS Credentials Info</b>
       {{name_value_box(aws_credentials)}}
    </ul>
    <ul class="top-level-list">
        <b>Resources</b>
       {{name_value_box(resources)}}
    </ul>
    <ul class="top-level-list">
        <b>GAC: {{identity_name}}</b>
        {{name_value_box(identity_secrets)}}
    </ul>
    <ul class="top-level-list">
        <b>Environment Variables</b>
        {{name_value_box(os_environ)}}
    </ul>
{% endblock %}
